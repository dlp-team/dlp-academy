# Worklog - Phase 02/03 (2026-02-23)

## Summary
- Began Phase 02 (implementation of institutionId on new writes).
- Began Phase 03 (read filtering and security alignment).

## Changes
- Added institution resolution by email domain/allowed_teachers in login and registration flows.
- Persisted `institutionId` for new users; backfilled missing `institutionId` on login when resolvable.
- Updated teacher dashboard queries to use `institutionId`.

## Files Touched
- src/pages/Auth/Login.jsx
- src/pages/Auth/hooks/useRegister.js
- src/pages/Auth/hooks/useLogin.js
- src/pages/TeacherDashboard/TeacherDashboard.jsx

## Next Actions
- Audit remaining reads for `schoolId` or missing `institutionId`.
- Plan security rules tightening for tenant isolation.
- Prepare migration/backfill strategy for legacy data.
